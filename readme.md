# 🧠 2채널 EEG 환경 분류 KPI 발견 파이프라인

2채널 전두엽 EEG를 사용해 **객관적인 환경(예: 조용한 교회 vs. 시끄러운 시장)을 분류**하는 뇌파 지표(KPI)를 '바텀업(Bottom-up)' 방식으로 발견하기 위한 Python 파이프라인입니다.

이 프로젝트는 M1(로드)부터 M6(저장)까지의 전처리, ICA 노이즈 제거, 데이터 분할 과정을 자동화합니다. 핵심 모듈(M5)은 **A (형태학적/시간축)**, **B (주파수축)**, **C (동적/비선형)** 영역에 걸친 포괄적인 KPI 후보군을 추출합니다. 최종 산출물은 머신러닝(LASSO, SVM) 분석을 위한 KPI 테이블(CSV)입니다.

---

## 🎯 1. 핵심 목표

본 프로젝트의 목표는 "교회(안정)"와 "시장(복잡)"이라는 명확히 구분되는 두 환경에서 뇌가 보이는 생체 신호의 차이를 정의하는 것입니다.

"뇌는 OOO 지표로 반응할 것이다"라고 미리 가정하는 대신, 가능한 모든 수학적/기하학적 KPI 후보를 측정한 뒤, 머신러닝(LASSO 등)을 이용해 두 환경을 구분하는 데 통계적으로 가장 유의미한 **핵심 KPI가 무엇인지 귀납적으로 '발견'**하는 것을 목표로 합니다.

## 🏭 2. 파이프라인 구조 (M1-M6)

프로젝트는 6개의 핵심 모듈로 구성된 자동화 파이프라인을 따릅니다. `main.py`는 `configs/base_config.yaml` 설정 파일을 읽어 `run_pipeline.py`를 실행합니다.

1.  **M1 (Load):** `data_raw/` 폴더의 CSV 원본 데이터를 MNE 객체로 로드합니다.
2.  **M2 (Preprocess):** 노치 필터 및 대역통과 필터를 적용합니다. (핵심 노이즈 제거 1)
3.  **M3 (ICA):** (옵션) `base_config.yaml`의 `USE_ICA=True`일 때만 ICA를 실행합니다. (2채널 환경에서는 권장되지 않음)
4.  **M4 (Epoch):** 정제된 데이터를 분석 단위(Epoch)로 분할하고, `REJECT_THRESHOLD_UV` 설정(예: 100µV)을 초과하는 아티팩트 Epoch를 제거합니다. (핵심 노이즈 제거 2)
5.  **M5 (Extract):** 본 프로젝트의 핵심 CPU. `features/` 폴더의 함수를 호출하여 A, B, C 카테고리의 모든 KPI를 추출합니다.
6.  **M6 (Save):** 모든 Epoch의 KPI를 `results/` 폴더에 `final_kpi_table.csv` 파일로 저장합니다.

## 🧮 3. 핵심 KPI 후보 카테고리

본 파이프라인은 '바텀업' 접근을 위해 다음 세 가지 대분류의 모든 지표를 추출합니다.

* **A. 형태학적 & 시간축 변수:** 파형의 원본($x(t)$) 신호의 '모양', '타이밍', '통계적 특성' (예: 진폭, Hjorth 파라미터, 1~4차 모멘트)
* **B. 주파수축 변수:** 신호를 주파수 스펙트럼(PSD)으로 변환하여, 각 '주파수 대역'의 특성 (예: 상대 알파 파워, SEF90, 1/f 지수)
* **C. 동적/비선형 변수:** 신호의 시간적 '변동성', '복잡성', '연결성' (예: 샘플 엔트로피, 프랙탈 차원, PLV, 알파 버스트율)

---

## 🚀 4. 시작하기

### A. 요구 사항

프로젝트 실행에 필요한 라이브러리 목록이 `requirements.txt` 파일에 포함되어 있습니다.

```bash
# 터미널에서 아래 명령어를 실행하여 모든 라이브러리를 한 번에 설치합니다.
pip install -r requirements.txt